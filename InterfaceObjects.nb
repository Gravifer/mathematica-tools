Notebook[{

Cell[CellGroupData[{
Cell["\[LeftCeiling]Interfaces\[RightFloor]", "CodeSection",
 Evaluatable->True,ExpressionUUID->"94f0d441-d035-414d-91d6-ddfa26b58e71"],

Cell["\<\
\[LeftCeiling]
\tThe idea for this package is that it will be used inside other packages to \
provide an easy, standard way to get all the nice OOP-like boilerplate in \
place that one generally would for an object based on an Association
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"6a3e596d-f3d1-4f2a-a9e3-c891b5f89af6"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"BeginPackage", "[", "\"\<InterfaceObjects`\>\"", "]"}], 
  ";"}]], "InputSection",ExpressionUUID->"c1185d12-4fad-4e76-90ed-\
ea52fdb9a48f"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"RegisterInterface", "::", "usage"}], "=", "\n", "\t", 
   "\"\<Registers an object interface\>\""}], 
  ";"}]], "CodeInput",ExpressionUUID->"0de061b9-8ed4-4be6-ae39-114519486449"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"$InterfacePropertyStore", "::", "usage"}], "=", "\n", "\t", 
   "\"\<ExpressionStore for cached object properties\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceSetProperty", "::", "usage"}], "=", "\n", "\t", 
   "\"\<Sets a property value\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"InterfacePropertyValue", "::", "usage"}], "=", "\n", "\t", 
    "\"\<Gets a property value\>\""}], ";"}], "\t"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceRemoveProperty", "::", "usage"}], "=", "\n", "\t", 
   "\"\<Removes a property value\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfacePropertyList", "::", "usage"}], "=", "\n", "\t", 
   "\"\<Lists the properties on an object\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceCopyProperties", "::", "usage"}], "=", "\n", "\t", 
   "\"\<Copies properties from one object to another\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"211276db-1d2c-4ca0-b0d1-1f0c1262989b"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceMethod", "::", "usage"}], "=", "\n", "\t", 
   "\"\<Alias for defining object methods\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceAttribute", "::", "usage"}], "=", "\n", "\t", 
   "\"\<Alias for defining object attributes\>\""}], 
  ";"}]}], "CodeInput",ExpressionUUID->"d69d55d9-a789-4ca5-8086-989cbb0fb582"]\

}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}], 
  ";"}]], "InputSection",ExpressionUUID->"feb5ca9c-1c12-4ed7-a0ff-\
7cac3736862a"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Properties\[RightFloor]", "CodeSubsection",
 Evaluatable->True,ExpressionUUID->"c1641688-4c2c-4fc3-a09c-54786d4d126e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"!", 
     RowBox[{"ValueQ", "@", "$InterfacePropertyStore"}]}], ",", "\n", "\t", 
    RowBox[{"$InterfacePropertyStore", "=", 
     RowBox[{
     "Language`NewExpressionStore", "[", "\"\<<ObjectPropertyStore>\>\"", 
      "]"}]}]}], "\n", "\t", "]"}], 
  ";"}]], "CodeInput",ExpressionUUID->"c5230367-c2b4-4740-bcb3-e67ae4493c44"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]get\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"d97ec2e7-6531-4ad1-8da9-94f6e3942324"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"propGet", "[", 
    RowBox[{"spec_", ",", " ", "prop_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"Replace", "[", 
    RowBox[{
     RowBox[{"$InterfacePropertyStore", "@", 
      RowBox[{"\"\<get\>\"", "[", 
       RowBox[{"spec", ",", " ", "prop"}], "]"}]}], ",", "\n", "\t\t", 
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"Null", "\[Rule]", 
        RowBox[{"Missing", "[", 
         RowBox[{"\"\<KeyAbsent\>\"", ",", " ", "prop"}], "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{
        RowBox[{"$$hold", "[", "x_", "]"}], "\[RuleDelayed]", "x"}]}], "\n", 
      "\t\t\t", "}"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"4095f988-64ca-4751-9d32-d08883251bc3"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]set\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"9314f21a-6b76-4018-8f06-4bcb92eac0d1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"propSet", "[", 
   RowBox[{"spec_", ",", " ", "prop_", ",", " ", "val_"}], "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{"$InterfacePropertyStore", "@", 
     RowBox[{"\"\<put\>\"", "[", 
      RowBox[{"spec", ",", " ", "prop", ",", " ", "val"}], "]"}]}], ";", "\n",
     "\t\t", "val"}], "\n", "\t\t", 
   ")"}]}]], \
"CodeInput",ExpressionUUID->"abd11aed-9ef1-4075-9267-2ff2709c0edb"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]set\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"029fa922-b66e-41c2-8b13-e943d8d0597b"],

Cell[BoxData[
 RowBox[{"$$hold", "~", "SetAttributes", "~", 
  "HoldAllComplete"}]], \
"CodeInput",ExpressionUUID->"161e8abb-1eb0-4a9c-ab91-9615e6ad8934"],

Cell[BoxData[
 RowBox[{"propSetDelayed", "~", "SetAttributes", "~", 
  "HoldRest"}]], \
"CodeInput",ExpressionUUID->"dafe7a93-6a21-4162-9104-6f34e33b630a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"propSetDelayed", "[", 
   RowBox[{"spec_", ",", " ", "prop_", ",", " ", "val_"}], "]"}], ":=", "\n", 
  "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{"$InterfacePropertyStore", "@", 
     RowBox[{"\"\<put\>\"", "[", 
      RowBox[{"spec", ",", " ", "prop", ",", " ", 
       RowBox[{"$$hold", "@", "val"}]}], "]"}]}], ";"}], "\n", "\t\t", 
   ")"}]}]], \
"CodeInput",ExpressionUUID->"035fad82-a75d-490e-bc86-946602637dfb"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]remove\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"03863101-18ec-43a6-83fa-14ac4da9d108"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"propRemove", "[", 
    RowBox[{"spec_", ",", " ", "prop_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"$InterfacePropertyStore", "@", 
    RowBox[{"\"\<remove\>\"", "[", 
     RowBox[{"spec", ",", " ", "prop"}], "]"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"48887d4a-5567-4cf9-b49f-ab6dd06b5584"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]keys\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"54bc6f71-5b21-47b4-8e18-2231000e0d0d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"propKeys", "[", "spec__", "]"}], ":=", "\n", "\t", 
  RowBox[{"$InterfacePropertyStore", "@", 
   RowBox[{
   "\"\<getKeys\>\"", "[", "spec", 
    "]"}]}]}]], \
"CodeInput",ExpressionUUID->"895982a2-df47-45c6-9e48-51d0b8f30cc7"]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]computeProp\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"2f4ceb7c-1057-4d36-bbcb-26e8a4af0275"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"computeProp", "[", 
   RowBox[{
   "spec_", ",", " ", "prop_", ",", " ", "func_", ",", " ", "args___"}], 
   "]"}], ":=", "\n", "\t", 
  RowBox[{"Replace", "[", 
   RowBox[{
    RowBox[{"propGet", "[", 
     RowBox[{"spec", ",", " ", "prop"}], "]"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"Missing", "[", 
      RowBox[{"\"\<KeyAbsent\>\"", ",", " ", "prop"}], "]"}], ":>", "\n", 
     "\t\t\t", 
     RowBox[{"With", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"v", "=", 
         RowBox[{"func", "[", "args", "]"}]}], "}"}], ",", "\n", "\t\t\t\t", 
       RowBox[{
        RowBox[{"propSet", "[", 
         RowBox[{"spec", ",", " ", "prop", ",", " ", "v"}], "]"}], ";", "\n", 
        "\t\t\t\t", "v"}]}], "\n", "\t\t\t\t", "]"}]}]}], "\n", "\t\t", 
   "]"}]}], "\n", 
 RowBox[{"computeProp", "~", "SetAttributes", "~", 
  "HoldAllComplete"}]}], \
"CodeInput",ExpressionUUID->"99a39d30-7600-4751-9c03-52546efbefe7"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]copyProps\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"775e75ad-d824-4174-ae12-56d3b5b0c77f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"copyProps", "[", 
   RowBox[{"obj1_", ",", " ", "obj2_", ",", " ", 
    RowBox[{"keyTest_:", 
     RowBox[{"(", 
      RowBox[{"True", "&"}], ")"}]}]}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Scan", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"keyTest", "[", "#", "]"}], ",", " ", 
       RowBox[{"propSet", "[", 
        RowBox[{"obj2", ",", " ", "#", ",", " ", 
         RowBox[{"propGet", "[", 
          RowBox[{"obj1", ",", " ", "#"}], "]"}]}], "]"}]}], "]"}], "&"}], 
    ",", " ", 
    RowBox[{"propKeys", "[", "obj1", "]"}]}], 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"e784ff11-40e3-44d0-89e1-5a010eed2eb2"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Properties\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"d7a6f94a-7444-43cc-9e2b-1b923a009880"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceSetProperty", "[", 
    RowBox[{"spec_", ",", " ", 
     RowBox[{"prop_", "\[Rule]", "val_"}]}], "]"}], ":=", "\n", "\t", 
   RowBox[{"propSet", "[", 
    RowBox[{"spec", ",", " ", "prop", ",", " ", "val"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceSetProperty", "[", 
    RowBox[{"spec_", ",", " ", 
     RowBox[{"prop_", ":>", "val_"}]}], "]"}], ":=", "\n", "\t", 
   RowBox[{"propSetDelayed", "[", 
    RowBox[{"spec", ",", " ", "prop", ",", " ", "val"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfacePropertyValue", "[", 
    RowBox[{"spec_", ",", " ", "prop_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"propGet", "[", 
    RowBox[{"spec", ",", " ", "prop"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceRemoveProperty", "[", 
    RowBox[{"spec_", ",", " ", "prop_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"propRemove", "[", 
    RowBox[{"spec", ",", " ", "prop"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"InterfacePropertyList", "[", "spec_", "]"}], ":=", "\n", "\t", 
  RowBox[{
  "propKeys", "[", "spec", 
   "]"}]}]}], \
"CodeInput",ExpressionUUID->"bbf128f0-9487-463b-8172-20f3e4af1692"]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]RegisterInterface\[RightFloor]", "CodeSubsection",
 Evaluatable->True,ExpressionUUID->"0974da96-6c1b-43f2-acfa-06282b5696c9"],

Cell["\<\
\[LeftCeiling]
\tThis function makes it really easy to create a new object and avoid the \
boilerplate
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"7cb38c78-22e5-4c5f-b126-9acd03117db7"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Defaults\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"4afe5f7a-e2ea-41b4-86f8-c4e6dddc84ee"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]defaultConstructorFailureFunction\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"3d45814b-8150-486e-862d-2d6b29d346fc"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"defaultConstructorFailureFunction", "[", 
    RowBox[{"head_", ",", " ", "args__"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"Failure", "[", 
    RowBox[{"\"\<BuildFailure\>\"", ",", "\n", "\t\t", 
     RowBox[{"<|", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{
       "\"\<MessageTemplate\>\"", "\[Rule]", 
        "\"\<Failed to build `` object from data ``\>\""}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"\"\<MessageParameters\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"head", ",", " ", 
          RowBox[{"HoldForm", "[", 
           RowBox[{"{", "args", "}"}], "]"}]}], "}"}]}]}], "\n", "\t\t\t", 
      "|>"}]}], "\n", "\t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
  "defaultConstructorFailureFunction", "~", "SetAttributes", "~", 
   "HoldAllComplete"}], 
  ";"}]}], "CodeInput",ExpressionUUID->"ed453e3f-621d-499e-989e-61af480b8706"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]createConstructor\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"573b8460-3828-4f85-8290-5f9caf9bcfed"],

Cell[BoxData[
 RowBox[{
  RowBox[{"createConstructor", "[", 
   RowBox[{"constructor_", ",", " ", "keys_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{
     RowBox[{"constructor", "[", "a_Association", "]"}], ":=", "\n", "\t\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "keys"}], ">", "1"}], "||", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "keys"}], "===", "1"}], "&&", 
         RowBox[{"KeyExistsQ", "[", 
          RowBox[{"a", ",", " ", 
           RowBox[{"keys", "[", 
            RowBox[{"[", "1", "]"}], "]"}]}], "]"}]}]}], ",", "\n", 
       "\t\t\t\t", "a", ",", "\n", "\t\t\t\t", 
       RowBox[{"Quiet", "[", 
        RowBox[{
         RowBox[{"AssociationThread", "[", 
          RowBox[{"keys", ",", " ", 
           RowBox[{"{", "a", "}"}]}], "]"}], ",", " ", 
         RowBox[{"AssociationThread", "::", "idim"}]}], "]"}]}], "\n", 
      "\t\t\t\t", "]"}]}], ";", "\n", "\t\t", 
    RowBox[{
     RowBox[{"constructor", "[", "args__", "]"}], ":=", "\n", "\t\t\t", 
     RowBox[{"Quiet", "[", 
      RowBox[{
       RowBox[{"AssociationThread", "[", 
        RowBox[{"keys", ",", " ", 
         RowBox[{"{", "args", "}"}]}], "]"}], ",", " ", 
       RowBox[{"AssociationThread", "::", "idim"}]}], "]"}]}]}], "\n", "\t\t",
    ")"}]}]], \
"CodeInput",ExpressionUUID->"04deca4c-f7ab-4033-ad3e-a8def6cd45e5"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]createAccessorFunctions\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"30ed2daa-ec93-4232-94c3-ae62e1f3c7ff"],

Cell[BoxData[
 RowBox[{
  RowBox[{"createAccessorFunctions", "[", 
   RowBox[{"head_", ",", " ", "headQ_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{"key", ",", "\n", "\t\t\t", "part"}], "\n", "\t\t\t", "}"}], ",",
     "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"part", "[", 
       RowBox[{
        RowBox[{"HoldPattern", "[", 
         RowBox[{
          RowBox[{"head", "[", "a_", "]"}], "?", "headQ"}], "]"}], ",", " ", 
        "k_String", ",", " ", "p___"}], "]"}], ":=", "\n", "\t\t\t", 
      RowBox[{"With", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"res", "=", 
          RowBox[{"Quiet", "[", 
           RowBox[{
            RowBox[{"a", "[", 
             RowBox[{"[", 
              RowBox[{"k", ",", " ", "p"}], "]"}], "]"}], ",", " ", 
            RowBox[{"Part", "::", "partd"}]}], "]"}]}], "}"}], ",", " ", 
        RowBox[{"res", "/;", 
         RowBox[{
          RowBox[{"Head", "[", "res", "]"}], "=!=", "Part"}]}]}], "]"}]}], 
     ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"key", "[", 
       RowBox[{
        RowBox[{"HoldPattern", "[", 
         RowBox[{
          RowBox[{"head", "[", "a_", "]"}], "?", "headQ"}], "]"}], ",", " ", 
        "k__"}], "]"}], ":=", "\n", "\t\t\t", 
      RowBox[{"a", "[", "k", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<Keys\>\"", "\[Rule]", "key"}], ",", " ", 
       RowBox[{"\"\<Parts\>\"", "\[Rule]", "part"}]}], "|>"}]}]}], "\n", 
   "\t\t", "]"}]}]], \
"CodeInput",ExpressionUUID->"486de2cf-af62-483d-b7bb-4e22398af045"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]createMutationHandlers\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"d50ed902-cbbe-4f49-9f20-8b4b8c94444e"],

Cell["\<\
\[LeftCeiling]\t
\tNeed to finish this up so I can have automatic creation of mutation \
handlers for the default case of wanting all basic mutations based on Set and \
stuff
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"07dba09f-5c4f-419a-83a9-f0265dcf65f6"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"createMutationHandlers", "[", "\n", "\t", 
   RowBox[{
   "head_", ",", "\n", "\t", "headQ_", ",", "\n", "\t", "handlers_List"}], 
   "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"Module", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"res", "=", 
       RowBox[{"<|", "|>"}]}], ",", "\n", "\t\t\t", "selfMutate", ",", "\n", 
      "\t\t\t", "keyMutate", ",", "\n", "\t\t\t", "partMutate", ",", "\n", 
      "\t\t\t", "selfDispatch", ",", "\n", "\t\t\t", "keyDispatch", ",", "\n",
       "\t\t\t", "partDispatch"}], "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"MemberQ", "[", 
        RowBox[{"handlers", ",", " ", "\"\<Self\>\""}], "]"}], ",", "\n", 
       "\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"selfMutate", "[", "\n", "\t\t\t\t", 
          RowBox[{"h_", ",", "\n", "\t\t\t\t", 
           RowBox[{"HoldPattern", "[", 
            RowBox[{
             RowBox[{"head", "[", "a_", "]"}], "?", "headQ"}], "]"}], ",", 
           "\n", "\t\t\t\t", "args___"}], "\n", "\t\t\t\t", "]"}], ":=", "\n",
          "\t\t\t\t", 
         RowBox[{"Block", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"core", "=", "a"}], "}"}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"h", "[", 
             RowBox[{
              RowBox[{"core", "[", "\"\<Value\>\"", "]"}], ",", " ", "args"}],
              "]"}], ";", "\n", "\t\t\t\t\t", 
            RowBox[{"head", "@", "core"}]}]}], "\n", "\t\t\t\t\t", "]"}]}], 
        ";", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"selfDispatch", "[", "h_", "]"}], ":=", "\n", "\t\t\t\t", 
         RowBox[{"Function", "[", 
          RowBox[{"Null", ",", " ", 
           RowBox[{"selfMutate", "[", 
            RowBox[{"h", ",", " ", "##"}], "]"}], ",", " ", 
           "HoldAllComplete"}], "]"}]}], ";", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"res", "[", "\"\<Self\>\"", "]"}], "=", "selfDispatch"}], 
        ";"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"MemberQ", "[", 
        RowBox[{"handlers", ",", " ", "\"\<Keys\>\""}], "]"}], ",", "\n", 
       "\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"keyMutate", "[", "\n", "\t\t\t\t", 
          RowBox[{"h_", ",", "\n", "\t\t\t\t", 
           RowBox[{"HoldPattern", "[", 
            RowBox[{
             RowBox[{"head", "[", "a_", "]"}], "?", "headQ"}], "]"}], ",", 
           "\n", "\t\t\t\t", 
           RowBox[{"{", "k__", "}"}], ",", "\n", "\t\t\t\t", "args___"}], 
          "\n", "\t\t\t\t", "]"}], ":=", "\n", "\t\t\t\t", 
         RowBox[{"Block", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"core", "=", "a"}], "}"}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"h", "[", 
             RowBox[{
              RowBox[{"core", "[", "k", "]"}], ",", " ", "args"}], "]"}], ";",
             "\n", "\t\t\t\t\t", 
            RowBox[{"head", "@", "core"}]}]}], "\n", "\t\t\t\t\t", "]"}]}], 
        ";", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"keyDispatch", "[", "h_", "]"}], ":=", "\n", "\t\t\t\t", 
         RowBox[{"Function", "[", 
          RowBox[{"Null", ",", " ", 
           RowBox[{"keyMutate", "[", 
            RowBox[{"h", ",", " ", "##"}], "]"}], ",", " ", 
           "HoldAllComplete"}], "]"}]}], ";", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"res", "[", "\"\<Keys\>\"", "]"}], "=", "keyDispatch"}], 
        ";"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"MemberQ", "[", 
        RowBox[{"handlers", ",", " ", "\"\<Parts\>\""}], "]"}], ",", "\n", 
       "\t\t\t", 
       RowBox[{
        RowBox[{
         RowBox[{"partMutate", "[", "\n", "\t\t\t\t", 
          RowBox[{"h_", ",", "\n", "\t\t\t\t", 
           RowBox[{"HoldPattern", "[", 
            RowBox[{
             RowBox[{"head", "[", "a_", "]"}], "?", "headQ"}], "]"}], ",", 
           "\n", "\t\t\t\t", 
           RowBox[{"{", "p__", "}"}], ",", "\n", "\t\t\t\t", "args___"}], 
          "\n", "\t\t\t\t", "]"}], ":=", "\n", "\t\t\t\t", 
         RowBox[{"Block", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"core", "=", "a"}], "}"}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{
            RowBox[{"h", "[", 
             RowBox[{
              RowBox[{"core", "[", 
               RowBox[{"[", "p", "]"}], "]"}], ",", " ", "args"}], "]"}], ";",
             "\n", "\t\t\t\t\t", 
            RowBox[{"head", "@", "core"}]}]}], "\n", "\t\t\t\t\t", "]"}]}], 
        ";", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"partDispatch", "[", "h_", "]"}], ":=", "\n", "\t\t\t\t", 
         RowBox[{"Function", "[", 
          RowBox[{"Null", ",", " ", 
           RowBox[{"partMutate", "[", 
            RowBox[{"h", ",", " ", "##"}], "]"}], ",", " ", 
           "HoldAllComplete"}], "]"}]}], ";", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"res", "[", "\"\<Parts\>\"", "]"}], "=", "partDispatch"}], 
        ";"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", "res"}]}], "\n", 
   "\t\t", "]"}]}], "\n", 
 RowBox[{"\t\t\t"}]}], \
"CodeInput",ExpressionUUID->"25a82167-a7ef-4535-b6ea-1115ecbe29c9"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]RegisterInterface\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"28093089-000a-4669-abf8-bf52649530fd"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "RegisterInterface", "]"}], "=", "\n", "\t", 
   RowBox[{"{", "\n", "\t\t", 
    RowBox[{
     RowBox[{"\"\<Version\>\"", "\[Rule]", "1"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<Atomic\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<Validator\>\"", "\[Rule]", "Automatic"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<Constructor\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
     "\t\t", 
     RowBox[{"\"\<MutationHandler\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
     "\t\t", 
     RowBox[{"\"\<MutationFunctions\>\"", "\[Rule]", "None"}], ",", "\n", 
     "\t\t", 
     RowBox[{"\"\<AccessorFunctions\>\"", "\[Rule]", "Automatic"}], ",", "\n",
      "\t\t", 
     RowBox[{"\"\<NormalFunction\>\"", "\[Rule]", "Automatic"}], ",", "\n", 
     "\t\t", 
     RowBox[{"\"\<Formatted\>\"", "\[Rule]", "True"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<Icon\>\"", "\[Rule]", "None"}], ",", "\n", "\t\t", 
     RowBox[{"\"\<DefaultMethods\>\"", "\[Rule]", 
      RowBox[{"{", "\n", "\t\t\t", 
       RowBox[{
       "Keys", ",", " ", "SetProperty", ",", " ", "PropertyValue", ",", "\n", 
        "\t\t\t", "RemoveProperty", ",", " ", "PropertyList"}], "\n", 
       "\t\t\t", "}"}]}], ",", "\n", "\t\t", 
     RowBox[{"\"\<DefaultAttributes\>\"", "\[Rule]", 
      RowBox[{"{", "\n", "\t\t\t", 
       RowBox[{"\"\<Properties\>\"", ",", " ", "\"\<Methods\>\""}], "\n", 
       "\t\t\t", "}"}]}]}], "\n", "\t\t", "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"RegisterInterface", "[", "\n", "\t", 
    RowBox[{"head_", ",", "\n", "\t", "keys_", ",", "\n", "\t", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "\t", "]"}], ":=", "\n",
    "\t", 
   RowBox[{"Module", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"entryQ", "=", 
        RowBox[{"True", "@", 
         RowBox[{"OptionValue", "[", "\"\<Atomic\>\"", "]"}]}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"ctor", "=", 
        RowBox[{"OptionValue", "[", "\"\<Constructor\>\"", "]"}]}], ",", "\n",
        "\t\t\t", "constructor", ",", "\n", "\t\t\t", 
       RowBox[{"ctorFail", "=", "defaultConstructorFailureFunction"}], ",", 
       "\n", "\t\t\t", 
       RowBox[{"ctorFailOnUndef", "=", "False"}], ",", "\n", "\t\t\t", 
       RowBox[{"vdtor", "=", 
        RowBox[{"OptionValue", "[", "\"\<Validator\>\"", "]"}]}], ",", "\n", 
       "\t\t\t", "objQ", ",", "\n", "\t\t\t", 
       RowBox[{"version", "=", 
        RowBox[{"OptionValue", "[", "\"\<Version\>\"", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"muh", "=", 
        RowBox[{"OptionValue", "[", "\"\<MutationHandler\>\"", "]"}]}], ",", 
       "\n", "\t\t\t", "mutationHandler", ",", "\n", "\t\t\t", 
       RowBox[{"mud", "=", 
        RowBox[{"OptionValue", "[", "\"\<MutationFunctions\>\"", "]"}]}], ",",
        "\n", "\t\t\t", 
       RowBox[{"acc", "=", 
        RowBox[{"OptionValue", "[", "\"\<AccessorFunctions\>\"", "]"}]}], ",",
        "\n", "\t\t\t", 
       RowBox[{"norm", "=", "\n", "\t\t\t\t", 
        RowBox[{"Replace", "[", 
         RowBox[{
          RowBox[{"OptionValue", "[", "\"\<NormalFunction\>\"", "]"}], ",", 
          "\n", "\t\t\t\t\t", 
          RowBox[{"Automatic", "\[RuleDelayed]", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"KeyDrop", "[", 
              RowBox[{"#", ",", " ", "\"\<Version\>\""}], "]"}], "&"}], 
            ")"}]}]}], "\n", "\t\t\t\t\t", "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"format", "=", 
        RowBox[{"OptionValue", "[", "\"\<Formatted\>\"", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"icon", "=", 
        RowBox[{"OptionValue", "[", "\"\<Icon\>\"", "]"}]}]}], "\n", "\t\t\t",
       "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"iRegisterInterfaceEntryQ", "[", "\n", "\t\t\t", 
       RowBox[{"head", ",", "\n", "\t\t\t", 
        RowBox[{"!", "entryQ"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"vdtor", "===", "Automatic"}], ",", " ", 
        RowBox[{"vdtor", "=", "objQ"}]}], "]"}], ";", "\n", "\t\t", 
      RowBox[{"iRegisterInterfaceValidator", "[", 
       RowBox[{"head", ",", " ", "keys", ",", " ", "vdtor"}], "]"}], ";", 
      "\n", "\t\t", 
      RowBox[{"Which", "[", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"ctor", "===", "Automatic"}], ",", "\n", "\t", "\t\t\t", 
        RowBox[{
         RowBox[{"createConstructor", "[", 
          RowBox[{"constructor", ",", " ", "keys"}], "]"}], ";", "\n", "\t", 
         "\t\t\t", 
         RowBox[{"ctor", "=", "constructor"}]}], ",", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{
          RowBox[{"Head", "[", "ctor", "]"}], "===", "Symbol"}], "&&", 
         RowBox[{
          RowBox[{"DownValues", "[", "ctor", "]"}], "\[Equal]", 
          RowBox[{"{", "}"}]}]}], ",", "\n", "\t\t\t\t", 
        RowBox[{"createConstructor", "[", 
         RowBox[{"ctor", ",", " ", "keys"}], "]"}], ",", "\n", "\t\t\t", 
        RowBox[{"AssociationQ", "@", "ctor"}], ",", "\n", "\t\t\t\t", 
        RowBox[{
         RowBox[{"ctorFail", "=", "\n", "\t\t\t\t\t", 
          RowBox[{"Lookup", "[", 
           RowBox[{
           "ctor", ",", " ", "\"\<FailureFunction\>\"", ",", " ", 
            "ctorFail"}], "]"}]}], ";", "\n", "\t\t\t\t", 
         RowBox[{"ctorFailOnUndef", "=", "\n", "\t\t\t\t\t", 
          RowBox[{"Lookup", "[", 
           RowBox[{
           "ctor", ",", " ", "\"\<FailOnUndefined\>\"", ",", " ", 
            "ctorFailOnUndef"}], "]"}]}], ";", "\n", "\t\t\t\t", 
         RowBox[{"ctor", "=", 
          RowBox[{"ctor", "[", "\"\<Function\>\"", "]"}]}]}]}], "\n", 
       "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"iRegisterInterfaceConstructor", "[", "\n", "\t\t\t", 
       RowBox[{
       "head", ",", "\n", "\t\t\t", "version", ",", "\n", "\t\t\t", "ctor", 
        ",", "\n", "\t\t\t", "ctorFail", ",", "\n", "\t\t\t", 
        "ctorFailOnUndef"}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"mud", "=!=", "None"}], ",", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"mud", "===", "Automatic"}], ",", " ", 
           RowBox[{"mud", "=", 
            RowBox[{"{", 
             RowBox[{
             "\"\<Self\>\"", ",", " ", "\"\<Keys\>\"", ",", " ", 
              "\"\<Parts\>\""}], "}"}]}]}], "]"}], ";", "\n", "\t\t\t", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"ListQ", "@", "mud"}], ",", "\n", "\t\t\t\t", 
           RowBox[{
            RowBox[{"mud", "=", 
             RowBox[{"createMutationHandlers", "[", 
              RowBox[{"head", ",", " ", "vdtor", ",", " ", "mud"}], "]"}]}], 
            ";"}]}], "\n", "\t\t\t\t", "]"}], ";", "\n", "\t\t\t", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"muh", "===", "Automatic"}], ",", "\n", "\t\t\t\t", 
           RowBox[{"muh", "=", "mutationHandler"}]}], "\n", "\t\t\t\t", "]"}],
          ";", "\n", "\t\t\t", 
         RowBox[{"iRegisterInterfaceMutationHandler", "[", "\n", "\t\t\t\t", 
          RowBox[{
          "head", ",", "\n", "\t\t\t\t", "mutationHandler", ",", "\n", 
           "\t\t\t\t", "mud"}], "\n", "\t\t\t\t", "]"}]}]}], "\n", "\t\t\t", 
       "]"}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"acc", "=!=", "None"}], ",", "\n", "\t\t\t", 
        RowBox[{"Which", "[", "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{"acc", "===", "Automatic"}], ",", "\n", "\t", "\t\t\t\t", 
          RowBox[{"iRegisterInterfaceAccessor", "[", 
           RowBox[{"head", ",", " ", 
            RowBox[{"createAccessorFunctions", "[", 
             RowBox[{"head", ",", " ", "vdtor"}], "]"}]}], "]"}], ",", "\n", 
          "\t\t\t\t", 
          RowBox[{"acc", "===", "\"\<Keys\>\""}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"iRegisterInterfaceAccessor", "[", 
           RowBox[{"head", ",", " ", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"KeyDrop", "[", "\"\<Parts\>\"", "]"}], "@", 
             RowBox[{"createAccessorFunctions", "[", 
              RowBox[{"head", ",", " ", "vdtor"}], "]"}]}]}], "\n", 
           "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", 
          RowBox[{"acc", "===", "\"\<Parts\>\""}], ",", "\n", "\t\t\t\t\t", 
          RowBox[{"iRegisterInterfaceAccessor", "[", 
           RowBox[{"head", ",", " ", "\n", "\t\t\t\t\t\t", 
            RowBox[{
             RowBox[{"KeyDrop", "[", "\"\<Keys\>\"", "]"}], "@", 
             RowBox[{"createAccessorFunctions", "[", 
              RowBox[{"head", ",", " ", "vdtor"}], "]"}]}]}], "\n", 
           "\t\t\t\t\t\t", "]"}], ",", "\n", "\t\t\t\t", "True", ",", "\n", 
          "\t\t\t\t\t", 
          RowBox[{"iRegisterInterfaceAccessor", "[", 
           RowBox[{"head", ",", " ", "acc"}], "]"}]}], "\n", "\t\t\t\t", 
         "]"}]}], "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"norm", "=!=", "None"}], ",", "\n", "\t\t\t", 
        RowBox[{"iRegisterInterfaceNormalForm", "[", 
         RowBox[{"head", ",", " ", "norm"}], "]"}]}], "\n", "\t\t\t", "]"}], 
      ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{"format", ",", "\n", "\t\t\t", 
        RowBox[{"iRegisterInterfaceFormatting", "[", 
         RowBox[{"head", ",", " ", "icon"}], "]"}]}], "\n", "\t\t\t", "]"}], 
      ";", "\n", "\t\t", 
      RowBox[{"iRegisterDefaultInterfaceMethods", "[", 
       RowBox[{"head", ",", " ", 
        RowBox[{"OptionValue", "[", "\"\<DefaultMethods\>\"", "]"}]}], "]"}], 
      ";", "\n", "\t\t", 
      RowBox[{"iRegisterDefaultInterfaceAttributes", "[", 
       RowBox[{"head", ",", " ", 
        RowBox[{"OptionValue", "[", "\"\<DefaultAttributes\>\"", "]"}]}], 
       "]"}], ";", "\n", "\t\t", "head"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"917db5ae-f053-4963-a98d-525483943366"]\

}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$InterfaceData\[RightFloor]", "CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"ba16c063-89a9-4d43-a858-1e449654b85a"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]$InterfaceData\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"bf37c556-c2c6-4195-914f-bf594b230ee5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"!", 
     RowBox[{"ValueQ", "@", "$InterfaceData"}]}], ",", "\n", "\t", 
    RowBox[{"$InterfaceData", "=", 
     RowBox[{
     "Language`NewExpressionStore", "[", "\"\<<ObjectDataStore>\>\"", 
      "]"}]}]}], "\n", "\t", "]"}], 
  ";"}]], "CodeInput",ExpressionUUID->"c8661438-0f21-430e-bb8c-bdda94424305"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]InterfaceConstructor\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"6058a133-8b97-44b1-a095-81a29c9d0cd0"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"InterfaceConstructor", "/:", "\n", "\t", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"InterfaceConstructor", "[", "head_", "]"}], "=", "fn_"}], ")"}],
    ":=", "\n", "\t\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<put\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<Constructor\>\"", ",", " ", "fn"}], 
     "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceConstructor", "[", "head_", "]"}], ":=", "\n", "\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<get\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<Constructor\>\""}], "]"}]}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"eaf9a098-4f90-48ce-b72c-972c31f7ddb6"]

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]InterfaceValidator\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"7ae148a3-4cc8-4836-89a7-225f923935f5"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"InterfaceValidator", "/:", "\n", "\t", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"InterfaceValidator", "[", "head_", "]"}], "=", "fn_"}], ")"}], ":=",
    "\n", "\t\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<put\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<Validator\>\"", ",", " ", "fn"}], 
     "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceValidator", "[", "head_", "]"}], ":=", "\n", "\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<get\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<Validator\>\""}], "]"}]}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"5de9c412-7a86-4cf1-816a-f4cd1bf9beda"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]InterfaceCheckValid\[RightFloor]", "CodeSubsubsubsection",
 
 Evaluatable->True,ExpressionUUID->"0bf8a832-2436-4db6-b617-da2fdf84ad2e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"InterfaceCheckValid", "/:", "\n", "\t", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"InterfaceCheckValid", "[", "head_", "]"}], "=", "fn_"}], ")"}], 
   ":=", "\n", "\t\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<put\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<CheckValid\>\"", ",", " ", "fn"}], 
     "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceCheckValid", "[", "head_", "]"}], ":=", "\n", "\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<get\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<CheckValid\>\""}], "]"}]}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"4b8155c4-f07f-4ad3-8275-4f5a159bce92"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]InterfaceCheckInvalid\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"9de1fef2-2f0f-4fd3-a0be-2d85411553c7"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"InterfaceCheckInvalid", "/:", "\n", "\t", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"InterfaceCheckInvalid", "[", "head_", "]"}], "=", "fn_"}], 
    ")"}], ":=", "\n", "\t\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<put\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<CheckInvalid\>\"", ",", " ", "fn"}], 
     "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceCheckInvalid", "[", "head_", "]"}], ":=", "\n", "\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<get\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<CheckInvalid\>\""}], "]"}]}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"2698a235-6c18-4332-a711-a600e9e14ace"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]InterfaceSetValid\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"054ae1a4-fcab-48e1-b34f-c443b8c632a3"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"InterfaceSetValid", "/:", "\n", "\t", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"InterfaceSetValid", "[", "head_", "]"}], "=", "fn_"}], ")"}], ":=",
    "\n", "\t\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<put\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<SetValid\>\"", ",", " ", "fn"}], 
     "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceSetValid", "[", "head_", "]"}], ":=", "\n", "\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<get\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<SetValid\>\""}], "]"}]}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"6ff894fe-d4df-4805-ad7a-5c85acbb77c3"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]InterfaceMethods\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"8b2529bf-8290-43b9-9f89-3044328c97b2"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"InterfaceMethods", "/:", "\n", "\t", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"InterfaceMethods", "[", "head_", "]"}], "=", "meths_"}], ")"}], 
   ":=", "\n", "\t\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<put\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<Methods\>\"", ",", " ", "meths"}], 
     "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceMethods", "[", "head_", "]"}], ":=", "\n", "\t", 
   RowBox[{
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"#", "===", "Null"}], ",", " ", 
       RowBox[{"<|", "|>"}], ",", " ", "#"}], "]"}], "&"}], "@", 
    RowBox[{"$InterfaceData", "@", 
     RowBox[{"\"\<get\>\"", "[", 
      RowBox[{"head", ",", " ", "\"\<Methods\>\""}], "]"}]}]}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"6b2d8ac0-ac2a-44c3-aed3-c740200cec20"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]InterfaceAttributes\[RightFloor]", "CodeSubsubsubsection",
 
 Evaluatable->True,ExpressionUUID->"a15c7a7c-d783-4bb1-a82d-f126002cb4f5"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"InterfaceAttributes", "/:", "\n", "\t", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"InterfaceAttributes", "[", "head_", "]"}], "=", "attrs_"}], 
    ")"}], ":=", "\n", "\t\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<put\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<Attributes\>\"", ",", " ", "attrs"}], 
     "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceAttributes", "[", "head_", "]"}], ":=", "\n", "\t", 
   RowBox[{"$InterfaceData", "@", 
    RowBox[{"\"\<get\>\"", "[", 
     RowBox[{"head", ",", " ", "\"\<Attributes\>\""}], "]"}]}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"426849ab-2dd5-4393-b708-4c16c4895657"]\

}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterInterfaceEntryQ\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"d2d81c4d-8595-4c1f-9176-ca7cbee38549"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iRegisterInterfaceEntryQ", "[", 
   RowBox[{"head_", ",", " ", "entryQ_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"checkInvalid", "=", "\n", "\t\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", "entryQ"}], ",", "\n", "\t\t\t\t\t", 
         "System`Private`HoldNotValidQ", ",", "\n", "\t\t\t\t\t", 
         "System`Private`HoldEntryQ"}], "\n", "\t\t\t\t\t", "]"}]}], ",", 
      "\n", "\t\t\t", 
      RowBox[{"checkValid", "=", "\n", "\t\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", "entryQ"}], ",", "\n", "\t\t\t\t\t", 
         "System`Private`HoldValidQ", ",", "\n", "\t\t\t\t\t", 
         "System`Private`HoldNoEntryQ"}], "\n", "\t\t\t\t\t", "]"}]}], ",", 
      "\n", "\t\t\t", 
      RowBox[{"setValid", "=", "\n", "\t\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", "entryQ"}], ",", "\n", "\t\t\t\t\t", 
         "System`Private`HoldSetValid", ",", "\n", "\t\t\t\t\t", 
         "System`Private`HoldSetNoEntry"}], "\n", "\t\t\t\t\t", "]"}]}]}], 
     "\n", "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"InterfaceCheckInvalid", "[", "head", "]"}], "=", 
      "checkInvalid"}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"InterfaceCheckValid", "[", "head", "]"}], "=", "checkValid"}], 
     ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"InterfaceSetValid", "[", "head", "]"}], "=", "setValid"}], 
     ";"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"fbda1d6a-0e32-4910-9980-007d4a8c87df"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterInterfaceValidator\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"fc7627ce-4e7d-4877-a3a2-878a7c1abcc4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iRegisterInterfaceValidator", "[", "\n", "\t", 
   RowBox[{
   "head_", ",", "\n", "\t", "keys_", ",", "\n", "\t", "testFunction_"}], 
   "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{"checkValid", "=", 
      RowBox[{"InterfaceCheckValid", "[", "head", "]"}]}], "\n", "\t\t\t", 
     "}"}], ",", "\n", "\t\t", 
    RowBox[{"(*", " ", 
     RowBox[{"Test", " ", "if", " ", "object", " ", "is", " ", "object"}], 
     " ", "*)"}], "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"InterfaceValidator", "[", "head", "]"}], "=", "testFunction"}],
      ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"testFunction", "[", 
       RowBox[{"d_Association", "?", "AssociationQ"}], "]"}], ":=", "\n", 
      "\t\t\t", 
      RowBox[{"AllTrue", "[", 
       RowBox[{"keys", ",", " ", 
        RowBox[{
         RowBox[{"KeyExistsQ", "[", 
          RowBox[{"d", ",", " ", "#"}], "]"}], "&"}]}], "]"}]}], ";", "\n", 
     "\t\t", 
     RowBox[{"testFunction", "/:", "\n", "\t\t\t", 
      RowBox[{"HoldPattern", "[", 
       RowBox[{"testFunction", "[", 
        RowBox[{
         RowBox[{"head", "[", "a_Association", "]"}], "?", "checkValid"}], 
        "]"}], "]"}], ":=", "\n", "\t\t\t", 
      RowBox[{"testFunction", "[", "a", "]"}]}], ";", "\n", "\t\t", 
     RowBox[{
      RowBox[{"testFunction", "[", "___", "]"}], ":=", "False"}], ";"}]}], 
   "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"aa0c29bb-0cc7-4ba1-8913-4c9297ebc2c1"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterInterfaceConstructor\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"d700e903-0e4c-4904-b0a0-d324c64ec368"],

Cell["\<\
\[LeftCeiling]
\tNeed to decide whether it\[CloseCurlyQuote]s best to leave unevaluated if \
the constructor returns an Association or not...
\[RightFloor]\
\>", "Text",
 Evaluatable->True,ExpressionUUID->"1142e6ad-3ee3-4854-95bc-24562496ba49"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iRegisterInterfaceConstructor", "[", "\n", "\t", 
   RowBox[{
   "head_", ",", "\n", "\t", "version_", ",", "\n", "\t", "constructor_", ",",
     "\n", "\t", "failureFunction_", ",", "\n", "\t", 
    "failOnUndefinedArguments_"}], "\n", "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"validator", "=", 
       RowBox[{"InterfaceValidator", "[", "head", "]"}]}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"checkInvalid", "=", 
       RowBox[{"InterfaceCheckInvalid", "[", "head", "]"}]}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"setValid", "=", 
       RowBox[{"InterfaceSetValid", "[", "head", "]"}]}]}], "\n", "\t\t\t", 
     "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"InterfaceConstructor", "[", "head", "]"}], "=", 
      "constructor"}], ";", "\n", "\t\t", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Constructor", " ", "DownValue", " ", "on", " ", "the", " ", "object"}],
       " ", "*)"}], "\n", "\t\t", 
     RowBox[{"head", "//", "ClearAll"}], ";", "\n", "\t\t", 
     RowBox[{"head", "~", "SetAttributes", "~", "HoldAllComplete"}], ";", 
     "\n", "\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"head", "[", "args___", "]"}], "?", "checkInvalid"}], ":=", 
      "\n", "\t\t\t", 
      RowBox[{"With", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"a", "=", 
          RowBox[{"constructor", "[", "args", "]"}]}], "}"}], ",", "\n", 
        "\t\t\t\t", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"AssociationQ", "@", "a"}], ",", "\n", "\t\t\t\t\t", 
           RowBox[{"With", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"a2", "=", 
               RowBox[{"Append", "[", 
                RowBox[{"a", ",", " ", 
                 RowBox[{"\"\<Version\>\"", "\[Rule]", "version"}]}], "]"}]}],
               "}"}], ",", "\n", "\t", "\t\t\t\t\t", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"TrueQ", "@", 
                RowBox[{"validator", "@", "a2"}]}], ",", "\n", "\t", 
               "\t\t\t\t\t\t", 
               RowBox[{"setValid", "@", 
                RowBox[{"head", "[", "a2", "]"}]}], ",", "\n", "\t", 
               "\t\t\t\t\t\t", 
               RowBox[{"failureFunction", "[", 
                RowBox[{"head", ",", " ", "args"}], "]"}]}], "\n", 
              "\t\t\t\t\t\t\t", "]"}]}], "\n", "\t\t\t\t\t\t", "]"}], ",", 
           "\n", "\t\t\t\t\t", 
           RowBox[{"failureFunction", "[", 
            RowBox[{"head", ",", " ", "args"}], "]"}]}], "\n", "\t\t\t\t\t", 
          "]"}], "/;", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"TrueQ", "[", "failOnUndefinedArguments", "]"}], "||", 
           RowBox[{"AssociationQ", "[", "a", "]"}]}], ")"}]}]}], "\n", 
       "\t\t\t\t", "]"}]}], ";"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"3c6509b4-5906-4d6f-8a1e-37986dcee86c"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterInterfaceMutationHandler\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"a28a7aa3-2940-4383-9bec-1dba3cf5f035"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$noArgMutations", "=", "\n", "\t", 
   RowBox[{"Alternatives", "@@", "\n", "\t\t", 
    RowBox[{"{", 
     RowBox[{"Unset", ",", " ", "Increment", ",", " ", "Decrement"}], 
     "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"06161b70-26c1-4e33-87e5-9cc9be9699bb"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$oneArgMutations", "=", "\n", "\t", 
   RowBox[{"Alternatives", "@@", "\n", "\t\t", 
    RowBox[{"{", "\n", "\t\t\t\t", 
     RowBox[{
     "Set", ",", " ", "SetDelayed", ",", "\n", "\t\t\t\t", "AddTo", ",", " ", 
      "SubtractFrom", ",", " ", "TimesBy", ",", " ", "DivideBy", ",", "\n", 
      "\t", "\t", "\t\t", "AppendTo", ",", " ", "PrependTo", ",", "\n", "\t", 
      "\t", "\t\t", "AssociateTo", ",", " ", "KeyDropFrom"}], "\n", 
     "\t\t\t\t", "}"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"6622ae5b-cc61-449c-9e5d-dfe6008f7b98"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iRegisterInterfaceMutationHandler", "[", "\n", "\t", 
   RowBox[{
   "head_", ",", "\n", "\t", "func_", ",", "\n", "\t", "dispatcher_"}], "\n", 
   "\t", "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{"{", "\n", "\t\t\t", 
     RowBox[{
      RowBox[{"oQ", "=", 
       RowBox[{"InterfaceValidator", "[", "head", "]"}]}], ",", "\n", 
      "\t\t\t", 
      RowBox[{"symQ", "=", 
       RowBox[{"Unique", "[", "symbolQ", "]"}]}], ",", "\n", "\t\t\t", 
      RowBox[{"oA", "=", "$oneArgMutations"}], ",", "\n", "\t\t\t", 
      RowBox[{"nA", "=", "$noArgMutations"}], ",", "\n", "\t\t\t", 
      RowBox[{"d", "=", "\n", "\t\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"!", 
          RowBox[{"AssociationQ", "@", "dispatcher"}]}], ",", " ", "\n", "\t",
          "\t\t\t\t", 
         RowBox[{"<|", 
          RowBox[{"\"\<Keys\>\"", "->", "dispatcher"}], "|>"}], ",", "\n", 
         "\t\t\t\t\t", "dispatcher"}], "\n", "\t\t\t\t\t", "]"}]}]}], "\n", 
     "\t\t\t", "}"}], ",", "\n", "\t\t", 
    RowBox[{
     RowBox[{"symQ", "~", "SetAttributes", "~", 
      RowBox[{"{", 
       RowBox[{"Temporary", ",", " ", "HoldFirst"}], "}"}]}], ";", "\n", 
     "\t\t", 
     RowBox[{
      RowBox[{"symQ", "[", "sym_", "]"}], ":=", "\n", "\t\t\t", 
      RowBox[{"MatchQ", "[", 
       RowBox[{
        RowBox[{"OwnValues", "[", "sym", "]"}], ",", " ", 
        RowBox[{"{", 
         RowBox[{"_", "\[RuleDelayed]", 
          RowBox[{"_head", "?", "oQ"}]}], "}"}]}], "]"}]}], ";", "\n", "\t\t", 
     RowBox[{"func", " ", "//", " ", "ClearAll"}], ";", "\n", "\t\t", 
     RowBox[{"func", "~", "SetAttributes", "~", "HoldAllComplete"}], ";", 
     "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"KeyExistsQ", "[", 
        RowBox[{"d", ",", " ", "\"\<Self\>\""}], "]"}], ",", "\n", "\t\t\t", 
       RowBox[{
        RowBox[{"With", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"subdispatch", "=", 
            RowBox[{"dispatcher", "[", "\"\<Self\>\"", "]"}]}], "}"}], ",", 
          "\n", "\t", "\t\t\t", 
          RowBox[{
           RowBox[{
            RowBox[{"func", "[", "\n", "\t", "\t\t\t\t", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"h", ":", " ", "oA"}], ")"}], "[", 
              RowBox[{
               RowBox[{"obj_Symbol", "?", "symQ"}], ",", " ", "val_"}], "]"}],
              "\n", "\t", "\t\t\t\t", "]"}], " ", ":=", "\n", "\t\t\t\t\t", 
            RowBox[{"With", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"res", "=", 
                RowBox[{
                 RowBox[{"subdispatch", "[", "h", "]"}], "[", 
                 RowBox[{"obj", ",", " ", "val"}], "]"}]}], "}"}], ",", "\n", 
              "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{"obj", "=", "res"}], ")"}], "/;", 
               RowBox[{
                RowBox[{"Head", "[", "res", "]"}], "===", "head"}]}]}], "\n", 
             "\t\t\t\t\t\t", "]"}]}], ";", "\n", "\t", "\t\t\t", 
           RowBox[{
            RowBox[{"func", "[", "\n", "\t", "\t\t\t\t", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"h", " ", ":", " ", "nA"}], ")"}], "[", 
              RowBox[{"obj_Symbol", "?", "symQ"}], "]"}], "\n", "\t", 
             "\t\t\t\t", "]"}], " ", ":=", "\n", "\t\t\t\t\t", 
            RowBox[{"With", "[", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{"res", "=", 
                RowBox[{
                 RowBox[{"subdispatch", "[", "h", "]"}], "[", "obj", "]"}]}], 
               "}"}], ",", "\n", "\t\t\t\t\t\t", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{"obj", "=", "res"}], ")"}], "/;", 
               RowBox[{
                RowBox[{"Head", "[", "res", "]"}], "===", "head"}]}]}], "\n", 
             "\t\t\t\t\t\t", "]"}]}], ";"}]}], "\n", "\t", "\t\t\t", "]"}], 
        ";"}]}], "\n", "\t", "\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"KeyExistsQ", "[", 
        RowBox[{"d", ",", " ", "\"\<Keys\>\""}], "]"}], ",", "\n", "\t\t\t", 
       RowBox[{"With", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"subdispatch", "=", 
           RowBox[{"dispatcher", "[", "\"\<Keys\>\"", "]"}]}], "}"}], ",", 
         "\n", "\t\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"func", "[", "\n", "\t\t\t\t\t", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"h", ":", " ", "oA"}], ")"}], "[", 
             RowBox[{
              RowBox[{
               RowBox[{"obj_Symbol", "?", "symQ"}], "[", "attr__", "]"}], ",",
               " ", "val_"}], "]"}], "\n", "\t", "\t", "\t\t\t", "]"}], " ", ":=",
            "\n", "\t\t\t\t\t", 
           RowBox[{"With", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"res", "=", 
               RowBox[{
                RowBox[{"subdispatch", "[", "h", "]"}], "[", 
                RowBox[{"obj", ",", " ", 
                 RowBox[{"{", "attr", "}"}], ",", " ", "val"}], "]"}]}], 
              "}"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"obj", "=", "res"}], ")"}], "/;", 
              RowBox[{
               RowBox[{"Head", "[", "res", "]"}], "===", "head"}]}]}], "\n", 
            "\t\t\t\t\t\t", "]"}]}], ";", "\n", "\t", "\t\t\t", 
          RowBox[{
           RowBox[{"func", "[", "\n", "\t", "\t\t\t\t", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"h", " ", ":", " ", "nA"}], ")"}], "[", 
             RowBox[{
              RowBox[{"obj_Symbol", "?", "symQ"}], "[", "attr__", "]"}], 
             "]"}], "\n", "\t", "\t\t\t\t", "]"}], " ", ":=", "\n", 
           "\t\t\t\t\t", 
           RowBox[{"With", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"res", "=", 
               RowBox[{
                RowBox[{"subdispatch", "[", "h", "]"}], "[", 
                RowBox[{"obj", ",", " ", 
                 RowBox[{"{", "attr", "}"}]}], "]"}]}], "}"}], ",", "\n", 
             "\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"obj", "=", "res"}], ")"}], "/;", 
              RowBox[{
               RowBox[{"Head", "[", "res", "]"}], "===", "head"}]}]}], "\n", 
            "\t\t\t\t\t\t", "]"}]}], ";"}]}], "\n", "\t\t\t\t", "]"}]}], "\n",
       "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"KeyExistsQ", "[", 
        RowBox[{"d", ",", " ", "\"\<Parts\>\""}], "]"}], ",", "\n", "\t\t\t", 
       
       RowBox[{"With", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"subdispatch", "=", 
           RowBox[{"dispatcher", "[", "\"\<Parts\>\"", "]"}]}], "}"}], ",", 
         "\n", "\t", "\t\t\t", 
         RowBox[{
          RowBox[{
           RowBox[{"func", "[", "\n", "\t", "\t\t\t\t", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"h", ":", " ", "oA"}], ")"}], "[", 
             RowBox[{
              RowBox[{
               RowBox[{"obj_Symbol", "?", "symQ"}], "[", 
               RowBox[{"[", "part__", "]"}], "]"}], ",", " ", "val_"}], "]"}],
             "\n", "\t\t\t\t\t", "]"}], " ", ":=", "\n", "\t\t\t\t\t", 
           RowBox[{"With", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"res", "=", 
               RowBox[{
                RowBox[{"subdispatch", "[", "h", "]"}], "[", 
                RowBox[{"obj", ",", " ", 
                 RowBox[{"{", "part", "}"}], ",", " ", "val"}], "]"}]}], 
              "}"}], ",", "\n", "\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"obj", "=", "res"}], ")"}], "/;", 
              RowBox[{
               RowBox[{"Head", "[", "res", "]"}], "===", "head"}]}]}], "\n", 
            "\t\t\t\t\t\t", "]"}]}], ";", "\n", "\t\t\t\t", 
          RowBox[{
           RowBox[{"func", "[", "\n", "\t", "\t\t\t\t", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"h", " ", ":", " ", "nA"}], ")"}], "[", 
             RowBox[{
              RowBox[{"obj_Symbol", "?", "symQ"}], "[", 
              RowBox[{"[", "part__", "]"}], "]"}], "]"}], "\n", "\t", 
            "\t\t\t\t", "]"}], " ", ":=", "\n", "\t\t\t\t\t", 
           RowBox[{"With", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"res", "=", 
               RowBox[{
                RowBox[{"subdispatch", "[", "h", "]"}], "[", 
                RowBox[{"obj", ",", " ", 
                 RowBox[{"{", "part", "}"}]}], "]"}]}], "}"}], ",", "\n", 
             "\t\t\t\t\t\t", 
             RowBox[{
              RowBox[{"(", 
               RowBox[{"obj", "=", "res"}], ")"}], "/;", 
              RowBox[{
               RowBox[{"Head", "[", "res", "]"}], "===", "head"}]}]}], "\n", 
            "\t\t\t\t\t\t", "]"}]}], ";"}]}], "\n", "\t", "\t\t\t", "]"}]}], 
      "\n", "\t\t\t", "]"}], ";", "\n", "\t\t", 
     RowBox[{"(*", " ", 
      RowBox[{
      "fallthrough", " ", "to", " ", "get", " ", "normal", " ", "behavior", 
       " ", "back"}], " ", "*)"}], "\n", "\t\t", 
     RowBox[{
      RowBox[{"func", "[", "___", "]"}], " ", ":=", " ", 
      "Language`MutationFallthrough"}], ";", "\n", "\t\t", 
     RowBox[{"Language`SetMutationHandler", "[", 
      RowBox[{"head", ",", " ", "func"}], "]"}], ";"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"b6544184-5db7-4a4f-a914-6a8d2612bdff"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterInterfaceMethod\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"44d049d1-856d-459b-887e-baafeb09a4aa"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"iRegisterInterfaceMethod", "~", "SetAttributes", "~", "HoldRest"}],
   ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"iRegisterInterfaceMethod", "[", "\n", "\t", 
    RowBox[{
    "head_", ",", "\n", "\t", "methodName_", ",", "\n", "\t", "lhs_", ",", 
     "\n", "\t", "args___", ",", "\n", "\t", "def_"}], "\n", "\t", "]"}], ":=",
    "\n", "\t", 
   RowBox[{"With", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"mn", "=", "methodName"}], ",", "\n", "\t\t\t", 
       RowBox[{"valid", "=", 
        RowBox[{"InterfaceValidator", "[", "head", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"meths", "=", 
        RowBox[{"InterfaceMethods", "[", "head", "]"}]}]}], "\n", "\t\t\t", 
      "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"InterfaceMethods", "[", "head", "]"}], "=", "\n", "\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"meths", "===", "Null"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"<|", 
          RowBox[{"mn", "\[Rule]", "True"}], "|>"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"Append", "[", 
          RowBox[{"meths", ",", " ", 
           RowBox[{"mn", "\[Rule]", "True"}]}], "]"}]}], "\n", "\t\t\t\t", 
        "]"}]}], ";", " ", "\n", "\t\t", 
      RowBox[{"head", "/:", 
       RowBox[{
        RowBox[{"lhs", "?", "valid"}], "[", 
        RowBox[{"mn", "[", "args", "]"}], "]"}], ":=", "\n", "\t\t\t", 
       "def"}], ";", "\n", "\t\t", 
      RowBox[{"head", "/:", 
       RowBox[{
        RowBox[{
         RowBox[{"lhs", "?", "valid"}], "[", "mn", "]"}], "[", "args", "]"}], 
       ":=", "\n", "\t\t\t", "def"}], ";"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"0bb476de-5200-430a-a48f-4e9032794143"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Unprotect", "[", "InterfaceMethod", "]"}], ";"}], "\n", 
 RowBox[{
  RowBox[{"InterfaceMethod", "/:", "\n", "\t", 
   RowBox[{"(", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"InterfaceMethod", "[", "head_", "]"}], "[", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"lhs_", "[", "method_", "]"}], "[", "args___", "]"}], "\n", 
      "\t\t\t", "]"}], ":=", "def_"}], "\n", "\t\t", ")"}], ":=", "\n", 
   "\t\t", 
   RowBox[{"iRegisterInterfaceMethod", "[", 
    RowBox[{
    "head", ",", " ", "method", ",", " ", "lhs", ",", " ", "args", ",", " ", 
     "def"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"InterfaceMethod", "/:", "\n", "\t", 
   RowBox[{"(", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"InterfaceMethod", "[", "head_", "]"}], "[", "\n", "\t\t\t", 
      RowBox[{"lhs_", "[", 
       RowBox[{"method_", "[", 
        RowBox[{"[", "args___", "]"}], "]"}], "]"}], "\n", "\t\t\t", "]"}], ":=",
      "def_"}], "\n", "\t\t", ")"}], ":=", "\n", "\t\t", 
   RowBox[{"iRegisterInterfaceMethod", "[", 
    RowBox[{
    "head", ",", " ", "method", ",", " ", "lhs", ",", " ", "args", ",", " ", 
     "def"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"Protect", "[", "InterfaceMethod", "]"}], 
  ";"}]}], "CodeInput",ExpressionUUID->"c6ea0940-07cc-444a-8bac-aaa041467fb4"]\

}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterInterfaceAttribute\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"fdd9d584-e2e3-4c6b-acf5-9a4e2d0fcf53"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "iRegisterInterfaceAttribute", "~", "SetAttributes", "~", "HoldRest"}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"iRegisterInterfaceAttribute", "[", "\n", "\t", 
    RowBox[{
    "head_", ",", "\n", "\t", "methodName_", ",", "\n", "\t", "lhs_", ",", 
     "\n", "\t", "def_"}], "\n", "\t", "]"}], ":=", "\n", "\t", 
   RowBox[{"With", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"mn", "=", "methodName"}], ",", "\n", "\t\t\t", 
       RowBox[{"valid", "=", 
        RowBox[{"InterfaceValidator", "[", "head", "]"}]}], ",", "\n", 
       "\t\t\t", 
       RowBox[{"meths", "=", 
        RowBox[{"InterfaceAttributes", "[", "head", "]"}]}]}], "\n", "\t\t\t",
       "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{
       RowBox[{"InterfaceAttributes", "[", "head", "]"}], "=", "\n", "\t\t\t", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"meths", "===", "Null"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"<|", 
          RowBox[{"mn", "\[Rule]", "True"}], "|>"}], ",", "\n", "\t\t\t\t", 
         RowBox[{"Append", "[", 
          RowBox[{"meths", ",", " ", 
           RowBox[{"mn", "\[Rule]", "True"}]}], "]"}]}], "\n", "\t\t\t\t", 
        "]"}]}], ";", " ", "\n", "\t\t", 
      RowBox[{"head", "/:", 
       RowBox[{
        RowBox[{"lhs", "?", "valid"}], "[", "mn", "]"}], ":=", "\n", "\t\t\t",
        "def"}], ";"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]}], "CodeInput",ExpressionUUID->"f36737bf-b7ab-4d87-8897-2a9f31ca231d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"Unprotect", "[", "InterfaceAttribute", "]"}], ";"}], "\n", 
 RowBox[{
  RowBox[{"InterfaceAttribute", "/:", "\n", "\t", 
   RowBox[{"(", "\n", "\t\t", 
    RowBox[{
     RowBox[{
      RowBox[{"InterfaceAttribute", "[", "head_", "]"}], "[", "\n", "\t\t\t", 
      
      RowBox[{"lhs_", "[", "method_", "]"}], "\n", "\t\t\t", "]"}], ":=", 
     "def_"}], "\n", "\t\t", ")"}], ":=", "\n", "\t\t", 
   RowBox[{"iRegisterInterfaceAttribute", "[", 
    RowBox[{"head", ",", " ", "method", ",", " ", "lhs", ",", " ", "def"}], 
    "]"}]}], ";"}], "\n", 
 RowBox[{"Protect", "[", "InterfaceAttribute", 
  "]"}]}], "CodeInput",ExpressionUUID->"b79ecd30-f3f6-4e52-a608-bb001f8e3b95"]\

}, Open  ]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterInterfaceAccessor\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"d10cd7a4-f856-4a59-8420-8cd2805bbaea"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"iRegisterInterfaceAccessor", "[", 
    RowBox[{"head_", ",", " ", "dispatcher_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"With", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{
       RowBox[{"ea", "=", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"!", 
           RowBox[{"AssociationQ", "@", "dispatcher"}]}], ",", " ", 
          RowBox[{"<|", 
           RowBox[{"\"\<Keys\>\"", "\[Rule]", "dispatcher"}], "|>"}], ",", 
          " ", "dispatcher"}], "]"}]}], ",", "\n", "\t\t\t", 
       RowBox[{"valid", "=", 
        RowBox[{"InterfaceValidator", "[", "head", "]"}]}]}], "\n", "\t\t\t", 
      "}"}], ",", "\n", "\t\t", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"KeyExistsQ", "[", 
         RowBox[{"ea", ",", " ", "\"\<Keys\>\""}], "]"}], ",", "\n", "\t\t\t", 
        RowBox[{
         RowBox[{"With", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"lookup", "=", 
             RowBox[{"dispatcher", "[", "\"\<Keys\>\"", "]"}]}], "}"}], ",", 
           "\n", "\t\t\t\t", 
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{"obj_head", "?", "valid"}], "[", 
              RowBox[{"attr_String", "?", 
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"!", 
                  RowBox[{"KeyExistsQ", "[", 
                   RowBox[{
                    RowBox[{"InterfaceMethods", "[", "head", "]"}], ",", " ", 
                    "#"}], "]"}]}], "&"}], ")"}]}], "]"}], ":=", "\n", 
             "\t\t\t\t\t", 
             RowBox[{"With", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"res", "=", 
                 RowBox[{"lookup", "[", 
                  RowBox[{"obj", ",", " ", "attr"}], "]"}]}], "}"}], ",", " ", 
               RowBox[{"res", "/;", 
                RowBox[{
                 RowBox[{"Head", "[", "res", "]"}], "=!=", "lookup"}]}]}], 
              "]"}]}], ";", "\n", "\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"obj_head", "?", "valid"}], "[", 
              RowBox[{"attr", ":", 
               RowBox[{"Except", "[", 
                RowBox[{"_String", "|", 
                 RowBox[{"_String", "[", "]"}]}], "]"}]}], "]"}], ":=", "\n", 
             "\t\t\t\t\t", 
             RowBox[{"With", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"res", "=", 
                 RowBox[{"lookup", "[", 
                  RowBox[{"obj", ",", " ", "attr"}], "]"}]}], "}"}], ",", " ", 
               RowBox[{"res", "/;", 
                RowBox[{
                 RowBox[{"Head", "[", "res", "]"}], "=!=", "lookup"}]}]}], 
              "]"}]}], ";", "\n", "\t\t\t\t", 
            RowBox[{
             RowBox[{
              RowBox[{"obj_head", "?", "valid"}], "[", 
              RowBox[{"attr1_", ",", " ", "attrs__"}], "]"}], ":=", "\n", 
             "\t\t\t\t\t", 
             RowBox[{"With", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"res", "=", 
                 RowBox[{"lookup", "[", 
                  RowBox[{"obj", ",", " ", "attr1", ",", " ", "attrs"}], 
                  "]"}]}], "}"}], ",", " ", 
               RowBox[{"res", "/;", 
                RowBox[{
                 RowBox[{"Head", "[", "res", "]"}], "=!=", "lookup"}]}]}], 
              "]"}]}], ";"}]}], "\n", "\t\t\t\t", "]"}], ";"}]}], "\n", 
       "\t\t\t", "]"}], ";", "\n", "\t\t", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"KeyExistsQ", "[", 
         RowBox[{"ea", ",", " ", "\"\<Parts\>\""}], "]"}], ",", "\n", 
        "\t\t\t", 
        RowBox[{
         RowBox[{"With", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"part", "=", 
             RowBox[{"dispatcher", "[", "\"\<Parts\>\"", "]"}]}], "}"}], ",", 
           "\n", "\t\t\t\t", 
           RowBox[{
            RowBox[{"head", "/:", 
             RowBox[{
              RowBox[{"obj_head", "?", "valid"}], "[", 
              RowBox[{"[", "p__", "]"}], "]"}], ":=", "\n", "\t\t\t\t\t", 
             RowBox[{"With", "[", 
              RowBox[{
               RowBox[{"{", 
                RowBox[{"res", "=", 
                 RowBox[{"part", "[", 
                  RowBox[{"obj", ",", " ", "p"}], "]"}]}], "}"}], ",", "\n", 
               "\t\t\t\t\t\t", 
               RowBox[{"res", "/;", 
                RowBox[{
                 RowBox[{"Head", "[", "res", "]"}], "=!=", "part"}]}]}], "\n",
               "\t\t\t\t\t\t", "]"}]}], ";"}]}], "\n", "\t\t\t\t", "]"}], 
         ";"}]}], "\n", "\t\t\t", "]"}], ";"}]}], "\n", "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"04ea9471-cead-4b28-92d6-5c9e3121282e"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterInterfaceNormalForm\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"9a234747-f05c-4838-8377-54e8e5c938fd"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"iRegisterInterfaceNormalForm", "[", 
    RowBox[{"head_", ",", " ", "norm_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"With", "[", "\n", "\t\t", 
    RowBox[{
     RowBox[{"{", "\n", "\t\t\t", 
      RowBox[{"valid", "=", 
       RowBox[{"InterfaceValidator", "[", "head", "]"}]}], "\n", "\t\t\t", 
      "}"}], ",", "\n", "\t\t", 
     RowBox[{"head", "/:", 
      RowBox[{"HoldPattern", "[", 
       RowBox[{"Normal", "[", 
        RowBox[{
         RowBox[{"head", "[", "a_", "]"}], "?", "valid"}], "]"}], "]"}], ":=", 
      RowBox[{"norm", "@", "a"}]}]}], "\n", "\t\t", "]"}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"925de48b-c497-4c00-b303-c6cdd6418f62"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterInterfaceFormatting\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"f4c46948-36da-40bd-9268-d82704b30822"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iRegisterInterfaceFormatting", "[", "\n", "\t", 
   RowBox[{"head_", ",", "\n", "\t", "icon_"}], 
   RowBox[{"(*", 
    RowBox[{",", "\n", "\t", 
     RowBox[{
      RowBox[{"keys_", " ", 
       RowBox[{"I", "'"}], "ll", " ", "add", " ", "this", " ", "in", " ", 
       "the", " ", "future"}], "..."}]}], "\n", "\t", "*)"}], "\n", "\t", 
   "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"valid", "=", 
      RowBox[{"InterfaceValidator", "[", "head", "]"}]}], "}"}], ",", "\n", 
    "\t\t", 
    RowBox[{
     RowBox[{"Format", "[", "\n", "\t\t\t", 
      RowBox[{"HoldPattern", "[", "\n", "\t\t\t\t", 
       RowBox[{"obj", ":", 
        RowBox[{
         RowBox[{"head", "[", "a_", "]"}], "?", 
         RowBox[{"(", 
          RowBox[{"Function", "[", 
           RowBox[{"Null", ",", " ", 
            RowBox[{"valid", "[", 
             RowBox[{"Unevaluated", "[", "#", "]"}], "]"}], ",", " ", 
            "HoldAllComplete"}], "]"}], ")"}]}]}], "\n", "\t\t\t\t", "]"}], 
      "\n", "\t\t\t", "]"}], ":=", "\n", "\t\t\t", 
     RowBox[{"RawBoxes", "@", "\n", "\t", "\t\t\t", 
      RowBox[{"BoxForm`ArrangeSummaryBox", "[", "\n", "\t", "\t\t\t\t", 
       RowBox[{"head", ",", "\n", "\t\t\t\t\t", 
        RowBox[{"Unevaluated", "[", 
         RowBox[{"head", "@@", 
          RowBox[{"{", "a", "}"}]}], "]"}], ",", "\n", "\t", "\t\t\t\t", 
        "icon", ",", "\n", "\t\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t\t", 
         RowBox[{"BoxForm`MakeSummaryItem", "[", "\n", "\t\t\t\t\t\t\t", 
          RowBox[{
           RowBox[{"{", "\n", "\t\t\t\t\t\t\t\t", 
            RowBox[{"\"\<Keys: \>\"", ",", " ", "\n", "\t\t\t\t\t\t\t\t", 
             RowBox[{"DeleteCases", "[", 
              RowBox[{
               RowBox[{"Keys", "@", "a"}], ",", " ", "\"\<Version\>\""}], 
              "]"}]}], "\n", "\t\t\t\t\t\t\t\t", "}"}], ",", "\n", 
           "\t\t\t\t\t\t\t", "StandardForm"}], "\n", "\t\t\t\t\t\t\t", "]"}], 
         "\n", "\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t", 
        RowBox[{"{", "\n", "\t\t\t\t\t\t", "}"}], ",", "\n", "\t\t\t\t\t", 
        "StandardForm"}], "\n", "\t\t\t\t\t", "]"}]}]}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"9bd4c3f1-0320-45ef-a426-ff16ff5b954f"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterDefaultInterfaceAttributes\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"442cf025-05a6-4549-b302-c9ef3540ee39"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Properties\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"700339d3-8456-4bca-837b-510f6b309d9e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"registerDefaultAttr", "[", 
   RowBox[{"head_", ",", " ", "validator_", ",", " ", "\"\<Properties\>\""}], 
   "]"}], ":=", "\n", "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{
     RowBox[{"InterfaceAttribute", "[", "head", "]"}], "[", 
     RowBox[{
      RowBox[{"HoldPattern", "[", 
       RowBox[{"head", "[", "a_", "]"}], "]"}], "[", "\"\<Properties\>\"", 
      "]"}], "]"}], ":=", "\n", "\t\t\t", 
    RowBox[{"Join", "[", "\n", "\t\t\t\t", 
     RowBox[{
      RowBox[{"Keys", "[", "a", "]"}], ",", "\n", "\t\t\t\t", 
      RowBox[{"Keys", "@", 
       RowBox[{"InterfaceAttributes", "[", "head", "]"}]}]}], "\n", 
     "\t\t\t\t", "]"}]}], "\n", "\t\t", 
   ")"}]}]], \
"CodeInput",ExpressionUUID->"b5b06629-30db-4887-a937-75083362b81c"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Methods\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"aa2fe4f2-736e-456d-900a-851a96dd3a21"],

Cell[BoxData[
 RowBox[{
  RowBox[{"registerDefaultAttr", "[", 
   RowBox[{"head_", ",", " ", "validator_", ",", " ", "\"\<Methods\>\""}], 
   "]"}], ":=", "\n", "\t", 
  RowBox[{"(", "\n", "\t\t", 
   RowBox[{
    RowBox[{
     RowBox[{"InterfaceAttribute", "[", "head", "]"}], "[", 
     RowBox[{
      RowBox[{"HoldPattern", "[", 
       RowBox[{"head", "[", "a_", "]"}], "]"}], "[", "\"\<Methods\>\"", "]"}],
      "]"}], ":=", "\n", "\t\t\t", 
    RowBox[{"Keys", "@", 
     RowBox[{"InterfaceMethods", "[", "head", "]"}]}]}], "\n", "\t\t", 
   ")"}]}]], \
"CodeInput",ExpressionUUID->"1450c19b-9c11-447c-84e6-240404dedddf"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterDefaultInterfaceMethods\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"fa709579-14ea-419f-94d1-74c76c202a5d"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iRegisterDefaultInterfaceAttributes", "[", 
   RowBox[{"head_", ",", " ", "attrs_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"v", "=", 
      RowBox[{"InterfaceValidator", "[", "head", "]"}]}], "}"}], ",", "\n", 
    "\t\t", 
    RowBox[{"Scan", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"registerDefaultAttr", "[", 
        RowBox[{"head", ",", " ", "v", ",", " ", "#"}], "]"}], "&"}], ",", 
      " ", "attrs"}], "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"cc36f7ec-e90e-4c7e-93be-a150c311f0ce"]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterDefaultInterfaceMethods\[RightFloor]", \
"CodeSubsubsection",
 Evaluatable->True,ExpressionUUID->"a7560a88-96f2-42d3-898e-0ede1f77780b"],

Cell[CellGroupData[{

Cell["\[LeftCeiling]Keys\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"a6142a7f-6e43-48da-8dbc-351deec4acf3"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"registerDefaultMethod", "[", 
    RowBox[{"head_", ",", " ", "validator_", ",", " ", "Keys"}], "]"}], ":=", 
   "\n", "\t", 
   RowBox[{"head", "/:", 
    RowBox[{"HoldPattern", "@", 
     RowBox[{"Keys", "[", 
      RowBox[{
       RowBox[{"head", "[", "a_", "]"}], "?", "validator"}], "]"}]}], ":=", 
    "\n", "\t\t", 
    RowBox[{"Keys", "[", "a", "]"}]}]}], 
  ";"}]], "CodeInput",ExpressionUUID->"44318ec3-814e-4263-86c9-64aca9718fdd"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]ReplacePart\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"2d6d3477-3777-498c-9dd3-b75a7ff40625"],

Cell[BoxData[
 RowBox[{
  RowBox[{"registerDefaultMethod", "[", 
   RowBox[{"head_", ",", " ", "validator_", ",", " ", "ReplacePart"}], "]"}], 
  ":=", "\n", "\t", 
  RowBox[{"head", "/:", 
   RowBox[{"HoldPattern", "@", 
    RowBox[{"ReplacePart", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"head", "[", "a_", "]"}], "?", "validator"}], ",", " ", "k_"}],
      "]"}]}], ":=", "\n", "\t\t", 
   RowBox[{"head", "[", 
    RowBox[{"ReplacePart", "[", 
     RowBox[{"a", ",", " ", "k"}], "]"}], 
    "]"}]}]}]], \
"CodeInput",ExpressionUUID->"d1beaeaf-af11-487b-86bb-0b64d4625bd4"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]MapAt\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"47bf860a-d586-41a3-871b-dc23de511dd1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"registerDefaultMethod", "[", 
   RowBox[{"head_", ",", " ", "validator_", ",", " ", "MapAt"}], "]"}], ":=", 
  "\n", "\t", 
  RowBox[{"head", "/:", 
   RowBox[{"HoldPattern", "@", 
    RowBox[{"MapAt", "[", 
     RowBox[{"f_", ",", " ", 
      RowBox[{
       RowBox[{"head", "[", "a_", "]"}], "?", "validator"}], ",", " ", "k_"}],
      "]"}]}], ":=", "\n", "\t\t", 
   RowBox[{"head", "[", 
    RowBox[{"MapAt", "[", 
     RowBox[{"f", ",", " ", "a", ",", " ", "k"}], "]"}], 
    "]"}]}]}]], \
"CodeInput",ExpressionUUID->"e7f17100-be98-49c1-9ea0-bf576918dc32"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]SetProperty\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"d18906cf-984d-4891-9802-b7473541beaa"],

Cell[BoxData[
 RowBox[{
  RowBox[{"registerDefaultMethod", "[", 
   RowBox[{"head_", ",", " ", "validator_", ",", " ", "SetProperty"}], "]"}], 
  ":=", "\n", "\t", 
  RowBox[{"head", "/:", 
   RowBox[{"HoldPattern", "@", 
    RowBox[{"SetProperty", "[", 
     RowBox[{
      RowBox[{"obj", ":", 
       RowBox[{"_head", "?", "validator"}]}], ",", " ", 
      RowBox[{"p", ":", 
       RowBox[{"_Rule", "|", "_RuleDelayed"}]}]}], "]"}]}], ":=", "\n", 
   "\t\t", 
   RowBox[{"InterfaceSetProperty", "[", 
    RowBox[{"obj", ",", " ", "p"}], 
    "]"}]}]}]], \
"CodeInput",ExpressionUUID->"618046f7-e1fe-4e21-a28d-23949d8d2d22"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]PropertyValue\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"515e0bfe-e815-4765-8960-04ec1e223123"],

Cell[BoxData[
 RowBox[{
  RowBox[{"registerDefaultMethod", "[", 
   RowBox[{"head_", ",", " ", "validator_", ",", " ", "PropertyValue"}], 
   "]"}], ":=", "\n", "\t", 
  RowBox[{"head", "/:", 
   RowBox[{"HoldPattern", "@", 
    RowBox[{"PropertyValue", "[", 
     RowBox[{
      RowBox[{"obj", ":", 
       RowBox[{"_head", "?", "validator"}]}], ",", " ", "p_"}], "]"}]}], ":=",
    "\n", "\t\t", 
   RowBox[{"InterfacePropertyValue", "[", 
    RowBox[{"obj", ",", " ", "p"}], 
    "]"}]}]}]], \
"CodeInput",ExpressionUUID->"d285cba0-75f8-48c3-9bf2-c2ac790231f7"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]RemoveProperty\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"b77ef66b-3a9a-41fb-888e-118bf6e5bb8b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"registerDefaultMethod", "[", 
   RowBox[{"head_", ",", " ", "validator_", ",", " ", "RemoveProperty"}], 
   "]"}], ":=", "\n", "\t", 
  RowBox[{"head", "/:", 
   RowBox[{"HoldPattern", "@", 
    RowBox[{"RemoveProperty", "[", 
     RowBox[{
      RowBox[{"obj", ":", 
       RowBox[{"_head", "?", "validator"}]}], ",", " ", "p_"}], "]"}]}], ":=",
    "\n", "\t\t", 
   RowBox[{"InterfaceRemoveProperty", "[", 
    RowBox[{"obj", ",", " ", "p"}], 
    "]"}]}]}]], \
"CodeInput",ExpressionUUID->"bf363f65-a962-47b9-8602-cd07612a07df"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]PropertyList\[RightFloor]", "CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"b81f1b8c-3915-4651-974b-f0df5bdd0527"],

Cell[BoxData[
 RowBox[{
  RowBox[{"registerDefaultMethod", "[", 
   RowBox[{"head_", ",", " ", "validator_", ",", " ", "PropertyList"}], "]"}],
   ":=", "\n", "\t", 
  RowBox[{"head", "/:", 
   RowBox[{"HoldPattern", "@", 
    RowBox[{"PropertyList", "[", 
     RowBox[{"obj", ":", 
      RowBox[{"_head", "?", "validator"}]}], "]"}]}], ":=", "\n", "\t\t", 
   RowBox[{
   "InterfacePropertyList", "[", "obj", 
    "]"}]}]}]], \
"CodeInput",ExpressionUUID->"043e95ba-d2dd-49e9-b90c-2a238eba5dd6"]
}, Closed]],

Cell[CellGroupData[{

Cell["\[LeftCeiling]iRegisterDefaultInterfaceMethods\[RightFloor]", \
"CodeSubsubsubsection",
 Evaluatable->True,ExpressionUUID->"010a887f-2727-4c7e-b400-d18abc748556"],

Cell[BoxData[
 RowBox[{
  RowBox[{"iRegisterDefaultInterfaceMethods", "[", 
   RowBox[{"head_", ",", " ", "fns_"}], "]"}], ":=", "\n", "\t", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"v", "=", 
      RowBox[{"InterfaceValidator", "[", "head", "]"}]}], "}"}], ",", "\n", 
    "\t\t", 
    RowBox[{"Scan", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"registerDefaultMethod", "[", 
        RowBox[{"head", ",", " ", "v", ",", " ", "#"}], "]"}], "&"}], ",", 
      " ", "fns"}], "]"}]}], "\n", "\t\t", 
   "]"}]}]], \
"CodeInput",ExpressionUUID->"019e7c0f-bfe6-48a9-be66-2687bd71af2a"]
}, Open  ]]
}, Closed]]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"End", "[", "]"}], 
  ";"}]], "InputSection",ExpressionUUID->"9dac5ffd-3497-409e-be10-\
a60ab050c12b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"EndPackage", "[", "]"}], 
  ";"}]], "InputSection",ExpressionUUID->"19be9dff-976f-4fa9-a22e-\
56b676803d9d"]
}, Open  ]],

Cell["", "SectionSeparator",ExpressionUUID->"7caa748b-78fc-4082-aded-\
e57495d40106"],

Cell[BoxData[
 RowBox[{
  RowBox[{"constructRVNArray", "[", 
   RowBox[{"l_List", "?", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       RowBox[{"Length", "@", 
        RowBox[{"Dimensions", "[", "#", "]"}]}], "==", "2"}], "&"}], ")"}]}], 
   "]"}], ":=", "\[IndentingNewLine]", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"m", "=", 
      RowBox[{"Developer`ToPackedArray", "@", "l"}]}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Developer`PackedArrayQ", "@", "m"}], "&&", 
       RowBox[{"MatrixQ", "[", 
        RowBox[{"m", ",", " ", "Internal`RealValuedNumericQ"}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"<|", 
       RowBox[{"\"\<Data\>\"", "\[Rule]", "m"}], "|>"}], ",", 
      "\[IndentingNewLine]", "$Failed"}], "\[IndentingNewLine]", "]"}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellLabel->
  "In[1495]:=",ExpressionUUID->"ee30e6ea-46ad-4aca-933c-e16fef1c44f8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"rna", "=", 
   RowBox[{"RealValuedNumericArray", "[", 
    RowBox[{"{", 
     RowBox[{"{", "1", "}"}], "}"}], "]"}]}], ";"}]], "Input",
 CellLabel->
  "In[1544]:=",ExpressionUUID->"bebb8139-0cd4-4642-8755-e6342fdfe2f4"],

Cell[BoxData[
 RowBox[{"<<", "InterfaceObjects`"}]], "Input",
 CellLabel->
  "In[1542]:=",ExpressionUUID->"12ab451d-df4b-4b78-9222-041467da2b94"],

Cell[BoxData[
 RowBox[{
  RowBox[{"RegisterInterface", "[", "\[IndentingNewLine]", 
   RowBox[{"RealValuedNumericArray", ",", "\[IndentingNewLine]", 
    RowBox[{"{", "\"\<Data\>\"", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"\"\<Validator\>\"", "\[Rule]", "rvaQ"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<Constructor\>\"", "\[Rule]", "\[IndentingNewLine]", 
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<Function\>\"", "->", "constructRVNArray"}], ",", " ", 
       RowBox[{"\"\<FailOnUndefined\>\"", "\[Rule]", "True"}]}], "|>"}]}]}], 
   "\[IndentingNewLine]", "]"}], ";"}]], "Input",
 CellLabel->
  "In[1548]:=",ExpressionUUID->"7724d14a-3dca-4096-b55c-f37be1cd1dcb"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"InterfaceMethod", "[", "RealValuedNumericArray", "]"}], "@", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"HoldPattern", "[", 
      RowBox[{"RealValuedNumericArray", "[", "a_", "]"}], "]"}], "[", 
     "\"\<Eigenvalues\>\"", "]"}], "[", "]"}]}], ":=", "\[IndentingNewLine]", 
  
  RowBox[{"Sort", "@", 
   RowBox[{"Eigenvalues", "@", 
    RowBox[{"a", "[", "\"\<Data\>\"", "]"}]}]}]}]], "Input",
 CellLabel->
  "In[1551]:=",ExpressionUUID->"8419b496-c4ba-4cfe-83e0-39d39f208d18"],

Cell[BoxData[
 RowBox[{
  RowBox[{"rva", "=", "\[IndentingNewLine]", 
   RowBox[{"RealValuedNumericArray", "@", "\[IndentingNewLine]", 
    RowBox[{"With", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"r", "=", 
        RowBox[{"RandomReal", "[", 
         RowBox[{
          RowBox[{"{", "}"}], ",", " ", 
          RowBox[{"{", 
           RowBox[{"50", ",", " ", "50"}], "}"}]}], "]"}]}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"r", ".", 
       RowBox[{"Transpose", "[", "r", "]"}]}]}], "\[IndentingNewLine]", 
     "]"}]}]}], 
  ";"}]], "Input",ExpressionUUID->"2ffa669d-48de-476f-b71e-f953cd812ff5"],

Cell[BoxData[
 RowBox[{"rva", "@", 
  RowBox[{"\"\<Eigenvalues\>\"", "[", "]"}]}]], "Input",
 CellLabel->
  "In[700]:=",ExpressionUUID->"a561d457-d7ee-4b26-a5eb-1719f0f944fd"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{
   "0.00005260370949122719`", ",", "0.004147580785578355`", ",", 
    "0.021617889107764895`", ",", "0.029734405477468365`", ",", 
    "0.07173000274120485`", ",", "0.12474732188628405`", ",", 
    "0.2007868636450354`", ",", "0.2657303769571611`", ",", 
    "0.3536703001807196`", ",", "0.38614360943274983`", ",", 
    "0.48541341162047635`", ",", "0.5780893622202798`", ",", 
    "0.5994174784592615`", ",", "0.722038070567374`", ",", 
    "0.7643676274943417`", ",", "0.8605511903391152`", ",", 
    "0.9961468093768823`", ",", "1.1647291351330413`", ",", 
    "1.264868305279773`", ",", "1.7634498073162015`", ",", 
    "2.1258272102077074`", ",", "2.155267461929491`", ",", 
    "2.4330409782058635`", ",", "2.5196134376382844`", ",", 
    "2.6560943529232595`", ",", "2.982072748262892`", ",", 
    "3.3644514712333247`", ",", "3.5629493882379863`", ",", 
    "3.7707277244093196`", ",", "4.132905122032587`", ",", 
    "4.384369220906925`", ",", "4.563157016699934`", ",", 
    "4.850902959655808`", ",", "5.254107653274311`", ",", 
    "5.622746361610761`", ",", "5.69500825355347`", ",", "6.453758945792399`",
     ",", "6.931692456462733`", ",", "7.53908976922877`", ",", 
    "7.760494470044573`", ",", "8.212539086061197`", ",", 
    "8.671835465173391`", ",", "9.325912812511183`", ",", 
    "10.553263177935964`", ",", "11.4075721451846`", ",", 
    "11.818421900242942`", ",", "12.594876566042359`", ",", 
    "14.452623347104728`", ",", "15.760959100265689`", ",", 
    "650.8637756711951`"}], "}"}], "//", "Short"}]], "Input",
 CellLabel->
  "In[701]:=",ExpressionUUID->"06bfac39-6a97-4e9a-81fd-be560dd05dee"],

Cell[BoxData[
 TagBox[
  RowBox[{"{", 
   RowBox[{"0.00005260370949122719`", ",", 
    RowBox[{"\[LeftSkeleton]", "48", "\[RightSkeleton]"}], ",", 
    "650.8637756711951`"}], "}"}],
  Short]], "Output",
 CellLabel->
  "Out[701]//Short=",ExpressionUUID->"a4f4020c-686b-43cd-979e-88e9896f8a62"]
}, Open  ]]
},
WindowSize->{808, 755},
WindowMargins->{{145, Automatic}, {Automatic, 32}},
FrontEndVersion->"11.3 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 5, \
2018)",
StyleDefinitions->FrontEnd`FileName[{"BTools"}, "CodePackage.nb", 
  CharacterEncoding -> "UTF-8"]
]

